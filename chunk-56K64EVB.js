import{a as $}from"./chunk-RTFZST55.js";import{Ab as T,Cb as V,Db as j,Eb as q,Fa as m,Fb as M,Gb as w,Hb as G,I as u,K as b,Ka as F,La as d,M as E,Ma as C,Na as n,Oa as r,Pa as B,R as l,Wa as i,Xa as _,Ya as c,Za as N,_a as I,eb as P,m as h,mb as R,oa as s,r as S,sb as f,ta as p,tb as A,ub as O,w as v,wa as x,wb as D}from"./chunk-SXJUJOWZ.js";var g=class o{baseUrl="https://restcountries.com/v3.1";http=l($);_regions=["Americas","Europe","Africa","Asia","Oceania"];get regions(){return[...this._regions]}getCountriesByRegion(e){if(!e)return h([]);let t=`${this.baseUrl}/region/${e}?fields=cca3,name,borders`;return this.http.get(t)}getCountryByAlphaCode(e){let t=`${this.baseUrl}/alpha/${e}?fields=cca3,name,borders`;return this.http.get(t)}getCountryBordersByCode(e){if(!e||e.length===0)return h([]);let t=[];return e.forEach(a=>{let U=this.getCountryByAlphaCode(a);t.push(U)}),S(t)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var k=(o,e)=>e.cca3;function J(o,e){if(o&1&&(n(0,"option",7),i(1),r()),o&2){let t=e.$implicit;m("value",t),s(),c(" ",t," ")}}function L(o,e){if(o&1&&(n(0,"option",7),i(1),r()),o&2){let t=e.$implicit;m("value",t.cca3),s(),c(" ",t.name.common," ")}}function z(o,e){if(o&1&&(n(0,"option",7),i(1),r()),o&2){let t=e.$implicit;m("value",t.cca3),s(),c(" ",t.name.common," ")}}var y=class o{formBuilder=l(w);countryServices=l(g);formCountry=this.renderForm();regions=p(this.countryServices.regions);countries=p([]);borders=p([]);renderForm(){return this.formBuilder.group({region:["",f.required],country:["",f.required],border:["",f.required]})}onFormChange=P(e=>{let t=this.onRegionChanged(),a=this.onCountryChanged();e(()=>{t?.unsubscribe(),a?.unsubscribe()})});onRegionChanged(){return this.formCountry.get("region")?.valueChanges.pipe(b(()=>this.clearFormChangedRegion()),v(e=>!!e),u(e=>this.countryServices.getCountriesByRegion(e??""))).subscribe(e=>{this.countries.set(e)})}onCountryChanged(){return this.formCountry.get("country")?.valueChanges.pipe(b(()=>this.clearFormChangedCountry()),v(e=>!!e),u(e=>this.countryServices.getCountryByAlphaCode(e??"")),u(e=>this.countryServices.getCountryBordersByCode(e.borders))).subscribe(e=>{console.log(e),this.borders.set(e)})}clearFormChangedRegion(){this.formCountry.get("country")?.setValue(""),this.formCountry.get("border")?.setValue(""),this.countries.set([]),this.borders.set([])}clearFormChangedCountry(){this.formCountry.get("border")?.setValue(""),this.borders.set([])}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["app-country-page"]],decls:40,vars:5,consts:[[1,"mt-3"],[3,"formGroup"],[1,"row","mb-3"],[1,"col"],["for","region",1,"form-label"],["formControlName","region",1,"form-control"],["value",""],[3,"value"],["for","country",1,"form-label"],["formControlName","country",1,"form-control"],[1,"form-label"],["formControlName","border",1,"form-control"]],template:function(t,a){t&1&&(n(0,"h1",0),i(1,"Selectores anidados"),r(),B(2,"hr"),n(3,"form",1)(4,"div",2)(5,"div",3)(6,"label",4),i(7,"Continente:"),r(),n(8,"select",5)(9,"option",6),i(10,"-- Seleccione Continente --"),r(),d(11,J,2,2,"option",7,F),r()()(),n(13,"div",2)(14,"div",3)(15,"label",8),i(16,"Pa\xEDs:"),r(),n(17,"select",9)(18,"option",6),i(19,"-- Seleccione Pa\xEDs --"),r(),d(20,L,2,2,"option",7,k),r()()(),n(22,"div",2)(23,"div",3)(24,"label",10),i(25,"Fronteras:"),r(),n(26,"select",11)(27,"option",6),i(28,"-- Seleccione la frontera --"),r(),d(29,z,2,2,"option",7,k),r()()()(),n(31,"h3"),i(32,"Formulario"),r(),n(33,"code"),i(34),N(35,"json"),r(),n(36,"p"),i(37,"Is form valid: "),n(38,"strong"),i(39),r()()),t&2&&(s(3),m("formGroup",a.formCountry),s(8),C(a.regions()),s(9),C(a.countries()),s(9),C(a.borders()),s(5),c(" ",I(35,3,a.formCountry.value),`
`),s(5),_(a.formCountry.valid))},dependencies:[G,D,q,M,j,A,O,T,V,R],encapsulation:2})};var ce=[{path:"",component:y}];export{ce as countryRoutes};
